<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Arena v2.1 â€” Production</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            background: #0a0a15;
            color: #e0e0ff;
            font-family: 'Segoe UI', sans-serif;
            overflow: hidden;
        }
        #gameCanvas {
            display: block;
            background: linear-gradient(135deg, #0a0a15 0%, #1a1a2e 100%);
        }
        #ui {
            position: absolute;
            top: 10px;
            left: 10px;
            background: rgba(18, 18, 37, 0.9);
            padding: 10px;
            border-radius: 8px;
            font-size: 12px;
            border: 1px solid #2a2a45;
        }
        #ui h3 {
            color: #00f2ff;
            margin-bottom: 8px;
            font-size: 14px;
        }
        .stat {
            margin: 4px 0;
            display: flex;
            justify-content: space-between;
            gap: 20px;
        }
        .stat-label { color: #b0b0d0; }
        .stat-value { color: #00ff9d; font-weight: bold; }
        button {
            margin-top: 10px;
            padding: 8px 16px;
            background: #00f2ff;
            color: #000;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;        }
        button:hover { background: #00c4d4; }
    </style>
</head>
<body>
    <canvas id="gameCanvas"></canvas>
    
    <div id="ui">
        <h3>ðŸŽ® AI Arena v2.1</h3>
        <div class="stat">
            <span class="stat-label">Step:</span>
            <span class="stat-value" id="stepStat">0</span>
        </div>
        <div class="stat">
            <span class="stat-label">Agents:</span>
            <span class="stat-value" id="agentStat">0</span>
        </div>
        <div class="stat">
            <span class="stat-label">FPS:</span>
            <span class="stat-value" id="fpsStat">0</span>
        </div>
        <button id="btnStart">â–¶ Start</button>
        <button id="btnReset">ðŸ”„ Reset</button>
    </div>

    <script type="module">
        import { GameEngine } from './game.js';
        import { Cortex2Brain } from './core/cortex.js';

        // === INIT ===
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        const engine = await new GameEngine({
            width: canvas.width,
            height: canvas.height,
            seed: 'arena_1'
        }).init();

        // === CREATE AGENTS ===
        engine.addAgent({
            id: 'blue',
            x: 200,
            y: 300,
            color: '#00d4ff',
            stats: { maxHealth: 100, damage: 3, speed: 22 }
        });
        engine.addAgent({
            id: 'red',
            x: 620,
            y: 300,
            color: '#ff5577',
            stats: { maxHealth: 100, damage: 3, speed: 22 }
        });

        // === CREATE BRAINS ===
        const brains = new Map();
        for (const [id, agent] of engine.agents) {
            const brain = new Cortex2Brain({
                seed: `brain_${id}`,
                taskSpec: {
                    inputComplexity: 0.7,
                    temporalDepth: 0.4,
                    socialComplexity: 0.8
                }
            });

            // Configure personality
            brain.configurePersonality({
                traits: {
                    bravery: Math.random() * 0.6 + 0.2,
                    aggression: Math.random() * 0.6 + 0.2,
                    empathy: Math.random() * 0.5
                }
            });

            brains.set(id, brain);
        }

        // === GAME LOOP ===
        let running = false;
        let lastTime = 0;
        let frameCount = 0;
